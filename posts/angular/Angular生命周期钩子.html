<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

    
      <link rel="icon" href="/coldcurrent/favicon.png" />
    

    <title>
        
          HANCLOD的个人博客
        
    </title>

    <!-- Spectre.css framework -->
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">

    <!-- theme css & js -->
    
<link rel="stylesheet" href="/coldcurrent/css/book.css">

    
<script src="/coldcurrent/js/book.js"></script>


    <!-- tocbot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
    
    <!-- katex -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">

    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/zooming/2.1.1/zooming.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const zooming = new Zooming()
    zooming.listen('.book-content img')
})
</script>

<meta name="generator" content="Hexo 5.0.0"></head>

<body>

<div class="book-container">
  <div class="book-sidebar">
    <div class="book-brand">
  <a href="/coldcurrent/">
    <img src="/coldcurrent/favicon.png">
    <span>HANCLOD的个人博客</span>
  </a>
</div>
    <div class="book-menu">
  <ul>
<li><a href="/hexo-theme-book-demo">Home</a></li>
<li><a href="/hexo-theme-book-demo/changelog">Changelog</a></li>
</ul>
<h2 id="java"><a href="#java" class="headerlink" title="java"></a>java</h2><h3 id="java-8-特性"><a href="#java-8-特性" class="headerlink" title="java 8 特性"></a>java 8 特性</h3><p><a href="/coldcurrent/posts/java/java8%E7%89%B9%E6%80%A7/stream.html">stream 流</a></p>
<p><a href="/coldcurrent/posts/java/java8%E7%89%B9%E6%80%A7/optional.html">optional</a></p>
<h2 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h2><ul>
<li><a href="/coldcurrent/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%B8%83%E5%A4%A7%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99.html">七大设计原则</a></li>
<li>创建型</li>
<li><ul>
<li><a href="/coldcurrent/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%B8%83%E5%A4%A7%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99.html">七大设计原则</a></li>
</ul>
</li>
<li><ul>
<li><a href="/coldcurrent/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%B8%83%E5%A4%A7%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99.html">七大设计原则</a></li>
</ul>
</li>
<li>构造型</li>
</ul>
<h2 id="Angular"><a href="#Angular" class="headerlink" title="Angular"></a>Angular</h2><ul>
<li><a href="/coldcurrent/posts/angular/Angular%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90.html">组件生命周期钩子</a></li>
<li><a href="/coldcurrent/posts/angular/Angular%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E4%BA%A4%E4%BA%92.html">组件之间交互</a></li>
</ul>
<h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><ul>
<li>DDL</li>
<li>DML</li>
<li>SQL高级特性</li>
<li><ul>
<li><a href="/coldcurrent/posts/SQL/SQL%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7%E2%80%94%E7%B4%A2%E5%BC%95.html">SQL高级特性—索引</a></li>
</ul>
</li>
</ul>
<h1 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h1><ul>
<li><a href="/hexo-theme-book-demo/demo/menu-realtime">Menu Realtime Demo</a></li>
</ul>
<h2 id="Render"><a href="#Render" class="headerlink" title="Render"></a>Render</h2><ul>
<li><a href="/hexo-theme-book-demo/demo/render/markdown-it-demo">markdown-it demo</a></li>
<li><a href="/hexo-theme-book-demo/demo/render/katex-demo">katex demo</a></li>
<li><a href="/hexo-theme-book-demo/demo/render/footnotes-demo">footnotes demo</a></li>
<li><a href="/hexo-theme-book-demo/demo/render/md-container">markdown-container</a></li>
</ul>
<h2 id="Lorem-Ipsum"><a href="#Lorem-Ipsum" class="headerlink" title="Lorem Ipsum"></a>Lorem Ipsum</h2><ul>
<li><a href="/hexo-theme-book-demo/demo/lorem-ipsum/en-demo">English</a></li>
<li><a href="/hexo-theme-book-demo/demo/lorem-ipsum/jp-demo">Japanese</a></li>
<li><a href="/hexo-theme-book-demo/demo/lorem-ipsum/kr-demo">Korean</a></li>
<li><a href="/hexo-theme-book-demo/demo/lorem-ipsum/tc-demo">Traditional Chinese</a></li>
<li><a href="/hexo-theme-book-demo/demo/lorem-ipsum/sc-demo">Simplified Chinese</a></li>
</ul>

</div>


<script src="/coldcurrent/js/book-menu.js"></script>

  </div>

  <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
  <div class="sidebar-toggle-inner"></div>
</div>

<script>
function add_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.add('show')  
}

function remove_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.remove('show')
}

function sidebar_toggle() {
    let sidebar_toggle = document.querySelector('.sidebar-toggle')
    let sidebar = document.querySelector('.book-sidebar')
    let content = document.querySelector('.off-canvas-content')
    if (sidebar_toggle.classList.contains('extend')) { // show
        sidebar_toggle.classList.remove('extend')
        sidebar.classList.remove('hide')
        content.classList.remove('extend')
    }
    else { // hide
        sidebar_toggle.classList.add('extend')
        sidebar.classList.add('hide')
        content.classList.add('extend')
    }
}
</script>

  <div class="off-canvas-content">
    <div class="columns">
      <div class="column col-10 col-lg-12">
        <div class="book-navbar">
          <!-- For Responsive Layout -->

<header class="navbar">
  <section class="navbar-section">
    <a onclick="open_sidebar()">
      <i class="icon icon-menu"></i>
    </a>
  </section>
</header>

        </div>
        <div class="book-content">
          <div class="book-post">
  <h2 id="Angular-组件生命周期钩子"><a href="#Angular-组件生命周期钩子" class="headerlink" title="Angular 组件生命周期钩子"></a>Angular 组件生命周期钩子</h2><p><img src="../../image/angular/20180201093324798.png"></p>
<blockquote>
<p>其中红色代表只执行一次（初始化类型的钩子），绿色代表执行多次（检测类型钩子）</p>
</blockquote>
<h2 id="生命周期的顺序"><a href="#生命周期的顺序" class="headerlink" title="生命周期的顺序"></a>生命周期的顺序</h2><p>当你的应用通过调用构造函数来实例化一个组件或指令时，Angular 就会调用那个在该实例生命周期的适当位置实现了的那些钩子方法。</p>
<p>Angular 会按以下顺序执行钩子方法。你可以用它来执行以下类型的操作。</p>
<table>
<thead>
<tr>
<th align="left">钩子方法</th>
<th align="left">用途</th>
<th align="left">时机</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>ngOnChanges()</code></td>
<td align="left">当 Angular 设置或重新设置数据绑定的<strong>输入属性</strong>时响应。 该方法接受当前和上一属性值的 <code>SimpleChanges</code> 对象注意，这发生的非常频繁，所以你在这里执行的任何操作都会显著影响性能。 欲知详情，参见本文档的ngOnchanges</td>
<td align="left">在 <code>ngOnInit()</code> 之前以及所绑定的一个或多个输入属性的值发生变化时都会调用。</td>
</tr>
<tr>
<td align="left"><code>ngOnInit()</code></td>
<td align="left">在 Angular 第一次显示数据绑定和设置指令/组件的输入属性之后，初始化指令/组件。 欲知详情，参见本文档中的<a target="_blank" rel="noopener" href="https://angular.cn/guide/lifecycle-hooks#oninit">初始化组件或指令</a>。</td>
<td align="left">在第一轮 <code>ngOnChanges()</code> 完成之后调用，只调用<strong>一次</strong>。</td>
</tr>
<tr>
<td align="left"><code>ngDoCheck()</code></td>
<td align="left">检测，并在发生 Angular 无法或不愿意自己检测的变化时作出反应。 欲知详情和范例，参见本文档中的<a target="_blank" rel="noopener" href="https://angular.cn/guide/lifecycle-hooks#docheck">自定义变更检测</a>。</td>
<td align="left">紧跟在每次执行变更检测时的 <code>ngOnChanges()</code> 和 首次执行变更检测时的 <code>ngOnInit()</code> 后调用。</td>
</tr>
<tr>
<td align="left"><code>ngAfterContentInit()</code></td>
<td align="left">当 Angular 把外部内容投影进组件视图或指令所在的视图之后调用。欲知详情和范例，参见本文档中的<a target="_blank" rel="noopener" href="https://angular.cn/guide/lifecycle-hooks#aftercontent">响应内容中的变更</a>。</td>
<td align="left">第一次 <code>ngDoCheck()</code> 之后调用，只调用一次。</td>
</tr>
<tr>
<td align="left"><code>ngAfterContentChecked()</code></td>
<td align="left">每当 Angular 检查完被投影到组件或指令中的内容之后调用。欲知详情和范例，参见本文档中的<a target="_blank" rel="noopener" href="https://angular.cn/guide/lifecycle-hooks#aftercontent">响应被投影内容的变更</a>。</td>
<td align="left"><code>ngAfterContentInit()</code> 和每次 <code>ngDoCheck()</code> 之后调用</td>
</tr>
<tr>
<td align="left"><code>ngAfterViewInit()</code></td>
<td align="left">当 Angular 初始化完组件视图及其子视图或包含该指令的视图之后调用。欲知详情和范例，参见本文档中的<a target="_blank" rel="noopener" href="https://angular.cn/guide/lifecycle-hooks#afterview">响应视图变更</a>。</td>
<td align="left">第一次 <code>ngAfterContentChecked()</code> 之后调用，只调用一次。</td>
</tr>
<tr>
<td align="left"><code>ngAfterViewChecked()</code></td>
<td align="left">每当 Angular 做完组件视图和子视图或包含该指令的视图的变更检测之后调用。</td>
<td align="left"><code>ngAfterViewInit()</code> 和每次 <code>ngAfterContentChecked()</code> 之后调用。</td>
</tr>
<tr>
<td align="left"><code>ngOnDestroy()</code></td>
<td align="left">每当 Angular 每次销毁指令/组件之前调用并清扫。 在这儿反订阅可观察对象和分离事件处理器，以防内存泄漏。 欲知详情，参见本文档中的<a target="_blank" rel="noopener" href="https://angular.cn/guide/lifecycle-hooks#ondestroy">在实例销毁时进行清理</a>。</td>
<td align="left">在 Angular 销毁指令或组件之前立即调用。</td>
</tr>
</tbody></table>
<h2 id="ngOnChanges"><a href="#ngOnChanges" class="headerlink" title="ngOnChanges"></a>ngOnChanges</h2><p>一旦检测到该组件或指令的**<em>输入属性**</em>发生了变化，Angular 就会调用它的 <code>ngOnChanges()</code> 方法。 这个 <em>onChanges</em> 范例通过监控 <code>OnChanges()</code> 钩子演示了这一点。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ngOnChanges(changes: SimpleChanges) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> propName <span class="keyword">in</span> changes) &#123;</span><br><span class="line">    <span class="keyword">let</span> chng = changes[propName];</span><br><span class="line">    <span class="keyword">let</span> cur  = <span class="built_in">JSON</span>.stringify(chng.currentValue);</span><br><span class="line">    <span class="keyword">let</span> prev = <span class="built_in">JSON</span>.stringify(chng.previousValue);</span><br><span class="line">    <span class="built_in">this</span>.changeLog.push(<span class="string">`<span class="subst">$&#123;propName&#125;</span>: currentValue = <span class="subst">$&#123;cur&#125;</span>, previousValue = <span class="subst">$&#123;prev&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ngOnChanges()</code> 方法获取了一个对象，它把每个发生变化的属性名都映射到了一个<a target="_blank" rel="noopener" href="https://angular.cn/api/core/SimpleChange">SimpleChange</a>对象， 该对象中有属性的当前值和前一个值。这个钩子会在这些发生了变化的属性上进行迭代，并记录它们。</p>
<p>这个例子中的 <code>OnChangesComponent</code> 组件有两个输入属性：<code>hero</code> 和 <code>power</code>。</p>
<p><code>src/app/on-changes.component.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Input</span>() hero: Hero;</span><br><span class="line"><span class="meta">@Input</span>() power: <span class="built_in">string</span>;</span><br></pre></td></tr></table></figure>

<p>宿主 <code>OnChangesParentComponent</code> 绑定了它们，就像这样：</p>
<p><code>src/app/on-changes-parent.component.html</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">on-changes</span> [<span class="attr">hero</span>]=<span class="string">&quot;hero&quot;</span> [<span class="attr">power</span>]=<span class="string">&quot;power&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">on-changes</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="../../image/angular/on-changes-anim.gif"></p>
<blockquote>
<p>但请注意：</p>
<p><code>ngOnChanges()</code> 方法不会捕获对 <code>hero.name</code> 更改。这是因为只有当输入属性的值发生变化时，Angular 才会调用该钩子。<strong>在这种情况下，<code>hero</code> 是输入属性，<code>hero</code> 属性的值是<em>对 hero 对象</em>的<em>引用</em> 。当它自己的 <code>name</code> 属性的值发生变化时，对象引用并没有改变</strong></p>
</blockquote>

</div>


  <div class="book-comments">
    




  </div>



<script src="/coldcurrent/js/book-post.js"></script>

        </div>
      </div>
      <div class="column col-2 hide-lg">
        <div class="book-post-info">
  
    <div class="book-post-meta">

  <div class="author">

    <!-- Author image -->
    <div class="author-img">
      
        <figure
          class="avatar avatar-lg"
          data-initial="H"
          style="background-color: #3b4351;">
        </figure>
      
    </div>

    <!-- Author title -->
    <div class="author-title">
      <div>HANLIUKUI</div>
      <div>2020-08-10</div>
    </div>
  </div>

  

  <div class="divider"></div>
</div>
  

  <div class="book-tocbot">
</div>
<div class="book-tocbot-menu">
  <a class="book-toc-expand" onclick="expand_toc()">Expand all</a>
  <a onclick="go_top()">Back to top</a>
  <a onclick="go_bottom()">Go to bottom</a>
</div>


<script src="/coldcurrent/js/book-toc.js"></script>

</div>
      </div>
    </div>
  </div>
  
  <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
</div>

</body>
</html>


<script src="/coldcurrent/js/book.js"></script>
